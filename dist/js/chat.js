(()=>{"use strict";var e={445:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Chat=void 0;const r=s(61),a=s(976),n=s(809),o=s(265),i=s(615);class l extends r.Selector{constructor(){super("body"),this.storage=new n.Storage,this.messageManager=new o.MessageManager,this.overlayModeManager=new a.OverlayModeManager(this.htmlElement),this.chatInputAreaSelector=new i.ChatInputAreaSelector,this.initialize()}initialize(){this.refreshOverlayMode(),this.initializeKeyListener(),this.initializeMessageListener()}initializeKeyListener(){window.addEventListener("keydown",(e=>{const t=["textarea","input"];if(![65,67,79].includes(e.keyCode))return;if(null==e.target)return;let s=null;try{s=e.target}catch(e){return void console.debug(e)}if(!e.altKey){if(t.includes(s.tagName.toLowerCase()))return;if(t.includes(s.id.toLowerCase()))return}const r={type:o.MessageType.KEY_DOWN,data:{keyCode:e.keyCode}};this.messageManager.send(r)}))}initializeMessageListener(){this.messageManager.setListener((e=>{switch(e.type){case o.MessageType.SET_OVERLAY_MODE:const t=e.data.isOverlayMode;this.changeOverlayMode(t);break;case o.MessageType.TOGGLE_CHAT_INPUT_ENABLED:this.chatInputAreaSelector.toggleShow()}}))}refreshOverlayMode(){let e=this.storage.get("overlay-mode");if(null==e)return void this.changeOverlayMode(!0);const t="true"==e;this.changeOverlayMode(t)}changeOverlayMode(e){const t=e?0:1;this.overlayModeManager.setMode(t)}}t.Chat=l},615:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ChatInputAreaSelector=void 0;const r=s(789),a=s(61);class n extends a.Selector{constructor(){super("yt-live-chat-message-input-renderer");try{this.chatInputModeManager=new r.ChatInputModeManager(this.htmlElement)}catch(e){this.chatInputModeManager=null,console.debug(e)}}toggleShow(){null!=this.chatInputModeManager&&this.chatInputModeManager.toggleMode()}}t.ChatInputAreaSelector=n},789:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ChatInputModeManager=void 0,t.ChatInputModeManager=class{constructor(e,t=0){this.element=e,this.setMode(t)}setMode(e){switch(e){case 0:this.element.classList.add("enabled-input-renderer"),this.element.classList.remove("disabled-input-renderer");break;case 1:this.element.classList.remove("enabled-input-renderer"),this.element.classList.add("disabled-input-renderer")}}toggleMode(){this.isEnabled?this.setMode(1):this.setMode(0)}get isEnabled(){return this.element.classList.contains("enabled-input-renderer")}get isDisabled(){return this.element.classList.contains("disabled-input-renderer")}}},265:(e,t)=>{var s;Object.defineProperty(t,"__esModule",{value:!0}),t.MessageType=t.MessageManager=void 0,t.MessageManager=class{setListener(e){chrome.runtime.onMessage.addListener(e)}send(e){chrome.runtime.sendMessage(e)}sendToActiveTab(e){chrome.tabs.query({active:!0,currentWindow:!0},(t=>{void 0!==t[0]&&null!=t[0].id&&chrome.tabs.sendMessage(t[0].id,e)}))}},(s=t.MessageType||(t.MessageType={}))[s.SET_OVERLAY_MODE=0]="SET_OVERLAY_MODE",s[s.TOGGLE_CHAT_INPUT_ENABLED=1]="TOGGLE_CHAT_INPUT_ENABLED",s[s.UPDATE_ICON=2]="UPDATE_ICON",s[s.KEY_DOWN=3]="KEY_DOWN"},976:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OverlayModeManager=void 0,t.OverlayModeManager=class{constructor(e){this.element=e}setMode(e){switch(e){case 0:this.element.classList.add("overlay-mode"),this.element.classList.remove("default-mode");break;case 1:this.element.classList.remove("overlay-mode"),this.element.classList.add("default-mode")}}toggleMode(){this.isEnabled?this.setMode(1):this.setMode(0)}get isEnabled(){return this.element.classList.contains("overlay-mode")}}},61:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Selector=void 0,t.Selector=class{constructor(e){this.query=e}get element(){const e=document.querySelector(this.query);if(null===e)throw new Error("DOM not found with selector."+this.query);return e}get elements(){return document.querySelectorAll(this.query)}get htmlElement(){const e=this.element;if(null===e)throw new Error("DOM is not HTMLElement.");return e}get htmlElements(){return document.querySelectorAll(this.query)}isGenerated(){return null!==document.querySelector(this.query)}}},809:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Storage=void 0,t.Storage=class{constructor(){this.keyPrefix="chat-overlayer-for-youtube-"}get(e){return window.localStorage.getItem(this.keyPrefix+e)}set(e,t){window.localStorage.setItem(this.keyPrefix+e,t)}}}},t={};function s(r){var a=t[r];if(void 0!==a)return a.exports;var n=t[r]={exports:{}};return e[r](n,n.exports,s),n.exports}(()=>{const e=s(445);window.onload=()=>{new e.Chat}})()})();